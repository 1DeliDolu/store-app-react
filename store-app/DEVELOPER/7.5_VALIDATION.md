Bu doküman `src/pages/Login.jsx` içindeki form doğrulama kullanımını ve `src/components/Loading.jsx` bileşeninin rolünü açıklar. Amaç: mevcut Login bileşenindeki `react-hook-form` validasyon örneğini, hata gösterimini ve UX davranışını adım adım anlatmaktır.

1. Kısa özet — Login.jsx'de neler var?

- `useForm` ile form yönetimi yapılıyor. `register`, `handleSubmit` ve `formState: { errors, isValid }` kullanılıyor.
- Her iki alan (`username`, `password`) için `required` ve `minLength` kuralları tanımlanmış.
- `TextField` bileşenlerinde `error` ve `helperText` prop'ları `errors` nesnesine göre ayarlanmış; böylece doğrulama mesajları kullanıcıya gösteriliyor.
- Submit butonu `disabled={!isValid}` ile form geçerli değilse devre dışı bırakılıyor.
- Form `noValidate` attribute'u ile native tarayıcı doğrulamasını kapatıyor; tüm doğrulama `react-hook-form` ile kontrol ediliyor.

2. `useForm` yapılandırması ve `isValid` davranışı

- `const { register, handleSubmit, formState: { errors, isValid } } = useForm({ defaultValues: { username: "", password: "" } });`

- `isValid` alanı, `useForm`'un varsayılan `mode`'una bağlı olarak davranır. Varsayılan `mode: 'onSubmit'` ise `isValid` yalnızca submit sırasında değerlendirilir; ama Login.jsx'te `disabled={!isValid}` kullanıldığı için önerilen davranış `mode: 'onChange'` veya `mode: 'onTouched'` ile daha iyi UX sağlar. Eğer anlık (inline) buton etkinleştirme istiyorsanız `useForm({ mode: 'onChange' })` kullanın.

3. `register` ile alan kuralları (kural setleri)

- Username için:

  - `required: 'username zorunlu alan'`
  - `minLength: { value: 3, message: 'username min. 3 karakter olmalıdır.' }`

- Password için:

  - `required: 'password zorunlu alan'`
  - `minLength: { value: 6, message: 'password min. 6 karakter olmalıdır.' }`

- Bu kurallar `react-hook-form` tarafında yönetilir; kullanıcı inputları değiştikçe veya submit denendiğinde `errors` nesnesi güncellenir. `TextField` içinde `error={!!errors.username}` ve `helperText={errors.username?.message}` kullanılarak mesaj gösteriliyor.

4. `noValidate` kullanımı

- Form elementine `noValidate` attribute'u verilmiş. Bu, tarayıcının kendi HTML5 validasyon balonlarını devre dışı bırakmak içindir. Böylece tüm hata mesajları tek bir kaynaktan (`react-hook-form`) gelir ve UI tutarlı kalır.

5. Submit davranışı

- Form `onSubmit={handleSubmit(handleForm)}` ile sarmalanmış. `handleSubmit` validasyon başarılıysa `handleForm(data)`'ı çağırır.
- `handleForm` içeriği şu an `console.log(data)` — gerçek uygulamada burada API çağrısı (auth isteği) yapılır ve kullanıcıya uygun geri bildirim verilir.

6. UX iyileştirme önerileri

- `useForm({ mode: 'onChange' })`: Butonu anlık olarak enable/disable etmek istiyorsanız bu şekilde değiştirin.
- `isSubmitting` kullanımı: async submit sırasında butonu disable edip loading göstermek için `const { formState: { isSubmitting } } = useForm()` kullanın.

  ```jsx
  <Button type="submit" disabled={isSubmitting || !isValid}>
    {isSubmitting ? <CircularProgress size={20} /> : "Submit"}
  </Button>
  ```

- Hata gösterimini daha kullanıcı dostu yapmak için `helperText`'e daha açıklayıcı metin yazın veya alanın altına küçük bir açıklama bileşeni ekleyin.

7. `Loading.jsx` bileşeninin rolü

- `Loading.jsx` bir Backdrop + CircularProgress bileşeni sunar. `message` prop'u ile gösterilen yazıyı değiştirebilirsiniz.
- Login akışı içinde `Loading` bileşeni genelde şu durumlarda kullanılır:

  - Sunucuya kimlik doğrulama isteği gönderilirken (isSubmitting true) — kullanıcıya beklemesini söylemek için.
  - Sayfa ya da önemli bir veri yüklenirken (örn. session kontrolü) genel global bir yükleniyor göstergesi olarak.

- Örnek kullanım (Login submit sırasında):

```jsx
function handleForm(data) {
  // setSubmitting(true) ya da react-hook-form isSubmitting kullan
  // API çağrısı
  // success -> redirect
  // finally -> setSubmitting(false)
}

{
  isSubmitting && <Loading message="Giriş yapılıyor..." />;
}
```

8. Güvenlik ve gizlilik notları

- Parolalar asla loglanmamalıdır. Mevcut `console.log(data)` geliştirme amaçlıdır; production'da kaldırın.
- Parola alanını UI'da `type="password"` ile tutmak temel bir gerekliliktir; ayrıca API çağrısını HTTPS üzerinden yapın.

9. Örnek geliştirme adımları (adım adım)

1) `useForm`'a `mode: 'onChange'` ekleyin (daha iyi buton/validasyon UX için).
2) `handleForm`'a async API çağrısı ekleyin, `isSubmitting` kullanarak butonu disable edin ve `Loading` gösterin.
3) Hata durumunda (401 veya doğrulama hatası) bir toast veya field-level hata mesajı gösterin (örn. `setError('username', { message: 'Geçersiz kullanıcı' })`).

10. Hızlı kontrol listesi

- [ ] `isValid` doğru `mode` ile çalışıyor mu? (onChange vs onSubmit)
- [ ] `console.log(data)` production'da kaldırıldı mı?
- [ ] `isSubmitting` ile Loading gösterimi eklediniz mi?
- [ ] Hatalı girişlerde alan bazlı mesajlar gösteriliyor mu?

Sonuç: `Login.jsx` mevcut haliyle `react-hook-form` validasyonunu doğru kullanıyor; UX ve güvenlik iyileştirmeleri (mode, isSubmitting, console.log silme) önerilir. `Loading.jsx` ise submit sırasında kullanıcı deneyimini iyileştirmek için kullanılabilir.
