# React Hook Form (7.x) — Kullanım Rehberi ve proje örneği

Bu doküman `react-hook-form` kütüphanesinin (v7) ne yaptığı, temel API'si ve projedeki `Login.jsx` ve `Register.jsx` dosyalarına nasıl uyduğu hakkında ayrıntılı açıklamalar içerir. Mevcut kodlar üzerinde değişiklik yapmayacak; bunun yerine hangi parçanın ne işe yaradığını, hangi iyileştirmelerin yapılabileceğini ve örnek kullanım kalıplarını göstereceğim.

Özet: `react-hook-form` performanslı, kontrolsüz (uncontrolled) form yönetimi sağlar. Form alanlarını doğrudan DOM üzerinden okuyup minimal re-render ile çalışır. MUI gibi UI kütüphaneleriyle birlikte kullanırken `register` ve/veya `Controller` pattern'lerini kullanırız.

## Kurulum

Proje kökünde (ör. `d:\store-app-react`) aşağıdaki komutu çalıştırarak yükleyin:

```bash
npm install react-hook-form
```

Eğer schema doğrulama (Yup) ile kullanmak isterseniz ayrıca `@hookform/resolvers` ve `yup` paketleri de ekleyebilirsiniz:

```bash
npm install @hookform/resolvers yup
```

## Temel kavramlar

- useForm(): form kontrol nesnesini döner. İçinden `register`, `handleSubmit`, `control`, `formState: { errors, isSubmitting, isValid }`, `reset`, `watch` gibi yardımcılar alırsınız.
- register(name, options): native input elemanlarını form ile bağlar. Basit, kontrolsüz input'lar için idealdir.
- handleSubmit(onValid, onInvalid?): form submit handler'ını sarmalar; validasyon başarılıysa `onValid` çağrılır.
- Controller: üçüncü taraf kontrollü bileşenlerle (MUI TextField gibi) kullanılır. `control` objesini alıp render prop ile component'e değer ve onChange aktarır.
- formState.errors: alan bazlı doğrulama hata nesnesi.

## `Login.jsx` içindeki kullanım — detaylı analiz

Mevcut `Login.jsx` dosyasında zaten `useForm` kullanılıyor:

- `const { register, handleSubmit } = useForm({ defaultValues: { username: "", password: "" } })` — burada form default değerleri set edilmiş. `register` doğrudan `TextField`'larda spread edilerek kullanılmış.

Avantajları:

- Hızlı ve basit: küçük login formu gibi doğrulaması minimal formlar için `register` yeterlidir.
- MUI `TextField`'a doğrudan `{...register('username')}` vermek çalışır çünkü TextField altında gerçek input elemanı bulunur ve `register` input ref'i ile çalışır.

Geliştirme/İyileştirme önerileri:

- Hata gösterimi: `register` ile birlikte `formState.errors`'u kullanarak TextField üzerinde `error` ve `helperText` prop'larını ayarlayın:

```jsx
const { register, handleSubmit, formState: { errors } } = useForm();

<TextField
  {...register('username', { required: 'Kullanıcı adı gerekli' })}
  error={!!errors.username}
  helperText={errors.username?.message}
  ...
/>
```

- Async submit: `handleSubmit` içine verdiğiniz `handleForm` fonksiyonu async olabilir; `formState.isSubmitting` ile submit sırasında butonu disable edebilirsiniz.

Edge-case notu:

- Eğer MUI TextField'ı özel olarak sarmalayan başka componentler varsa (ör. custom Input wrapper), `register` işe yaramayabilir ve `Controller` kullanmanız gerekir.

## `Register.jsx` içindeki kullanım — analiz ve öneriler

Mevcut `Register.jsx` basit bir form markup içeriyor ama `react-hook-form` kullanılmamış. Bu dosyayı değiştirmeyeceğiz ancak bir rehber olarak nasıl `useForm` ile entegre edileceğini göstereceğim.

Örnek dönüşüm (sadece rehber; gerçek dosyada değiştirme yapmıyoruz):

```jsx
import { useForm } from "react-hook-form";

function RegisterPage() {
  const {
    register,
    handleSubmit,
    formState: { errors, isSubmitting },
  } = useForm({
    defaultValues: { username: "", email: "", password: "" },
  });

  const onSubmit = async (data) => {
    // API çağrısı
  };

  return (
    <Box component="form" onSubmit={handleSubmit(onSubmit)}>
      <TextField
        {...register("username", { required: "Kullanıcı adı gerekli" })}
        error={!!errors.username}
        helperText={errors.username?.message}
      />
      ...
    </Box>
  );
}
```

Ek doğrulama örnekleri:

- Email için pattern: `{ pattern: { value: /\S+@\S+\.\S+/, message: 'Geçerli bir e-posta girin' } }`
- Parola için minLength: `{ minLength: { value: 6, message: 'En az 6 karakter' } }`

Yup ile schema doğrulama (büyük formlar için önerilir):

```jsx
import { yupResolver } from "@hookform/resolvers/yup";
import * as yup from "yup";

const schema = yup.object({
  username: yup.string().required("Kullanıcı adı gerekli"),
  email: yup
    .string()
    .email("Geçerli e-posta girin")
    .required("E-posta gerekli"),
  password: yup.string().min(6, "Parola en az 6 karakter olmalı"),
});

const {
  register,
  handleSubmit,
  formState: { errors },
} = useForm({
  resolver: yupResolver(schema),
});
```

## MUI + react-hook-form entegrasyonu — Controller kullanımı

`register` küçük native input'lar için idealken, MUI gibi kontrollü bileşenlerde `Controller` kullanmak daha sağlamdır. Örnek:

```jsx
import { Controller, useForm } from "react-hook-form";
import TextField from "@mui/material/TextField";

<Controller
  name="email"
  control={control}
  defaultValue=""
  rules={{ required: "E-posta gerekli" }}
  render={({ field, fieldState }) => (
    <TextField
      {...field}
      error={!!fieldState.error}
      helperText={fieldState.error?.message}
    />
  )}
/>;
```

Bu pattern, MUI Select, Autocomplete veya özel bileşenlerle çalışırken özellikle gerekli olur.

## Pratik ipuçları

- `mode` opsiyonu: `useForm({ mode: 'onTouched' })` veya `mode: 'onBlur'` ile doğrulama zamanlamasını ayarlayın.
- `shouldUnregister` default true'dur — dinamik alanları yönetirken dikkat edin.
- Büyük formlarda `Controller` kullanmak re-render kontrolü için daha iyi olabilir; küçük input'lar için `register` daha performanslıdır.
- `watch` ile alan değerlerini izleyebilir, `reset` ile formu temizleyebilirsiniz.

## Özet / Öneriler

- `Login.jsx`'de kullanılan `useForm` zaten doğru bir başlangıç; eksik olan `formState.errors` gösterimi eklenebilir ve submit sırasında buton disable edilebilir.
- `Register.jsx` için `useForm` kullanımı önerilir; küçük formlar için `register`, daha kompleks doğrulama için `yup` ile resolver kullanın.
- MUI ile tam uyum için `Controller` örneklerini kullanın. Bu, özellikle Third-party kontrollü bileşenlerde (`Autocomplete`, `Select`) gereklidir.

---

Bu dosyayı hazırladım ve paket kurulumunu hemen çalıştırabilirim (isterseniz şimdi kurarım). Paket kurulumu için onay verin veya manuel olarak çalıştırmak isterseniz şu komutu kullanın:

```bash
npm install react-hook-form
```
